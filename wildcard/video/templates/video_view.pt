<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

  <metal:js fill-slot="javascript_head_slot">
      <script src="mediaelement-and-player.min.js"
              tal:attributes="src string:${view/mstatic}/mediaelement-and-player.min.js"></script>
      <link rel="stylesheet" href="mediaelementplayer.css"
            tal:attributes="href string:${view/mstatic}/mediaelementplayer.css" />
      <script>
          $(document).ready(function(){
            $('video').mediaelementplayer(/* Options */);
          });
      </script>
  </metal:js>

<body>

<metal:content-core fill-slot="content-core">
    <metal:content-core define-macro="content-core">
        <tal:has_video tal:condition="view/mp4_url">
            <video width="320" height="240" poster="poster.jpg" controls="controls" preload="none"
                  tal:attributes="poster view/image_url;
                                  width view/width|string:320;
                                  height view/height|string:240;">
                <tal:videos tal:repeat="video view/videos">
                    <source src="/media/echo-hereweare.mp4" type="video/mp4"
                            tal:attributes="src video/url;
                                            type string:video/${video/type}" />
                </tal:videos>
                <object width="320" height="240" type="application/x-shockwave-flash" data="flashmediaelement.swf"
                        tal:attributes="data string:${view/mstatic}/flashmediaelement.swf;
                                        width view/width|string:320;
                                        height view/height|string:240;">
                    <param name="movie" value="flashmediaelement.swf"
                          tal:attributes="data string:${view/mstatic}/flashmediaelement.swf"/>
                    <param name="flashvars" value="controls=true&file=myvideo.mp4"
                          tal:attributes="value string:controls=true&file=${view/mp4_url}" />
                    <img src="myvideo.jpg" width="320" height="240" title="No video playback capabilities"
                         tal:condition="view/image_url"
                         tal:attributes="src view/image_url;
                                         title context/Title;
                                         width view/width|string:320;
                                         height view/height|string:240"/>
                </object>
            </video>
        </tal:has_video>
        <tal:yt tal:condition="context/youtube_url|nothing">
            <video width="640" height="360" id="player1" preload="none"
                   tal:attributes="width view/width|string:640;
                                   height view/height|string:360;">
                <source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI"
                        tal:attributes="src context/youtube_url" />
            </video>
        </tal:yt>
    </metal:content-core>
</metal:content-core>

</body>
</html>

